# Исправление ошибки 404 для Yandex OAuth

## Проблема

Получаете ошибку:
```json
{"error":{"message":"Route GET /api/auth/yandex not found","code":"NOT_FOUND","statusCode":404}}
```

## Решение

### 1. Перезапустите сервер

Сервер нужно перезапустить после добавления нового файла `auth-yandex.ts`.

**Остановите сервер:**
- Нажмите `Ctrl+C` в терминале, где запущен сервер

**Запустите снова:**
```bash
npm run dev
```

Или если используете скрипт:
```bash
./START_DEV_SERVER.sh
```

### 2. Проверьте логи сервера

После перезапуска в логах должно появиться:
```
Yandex OAuth router registered at /api/auth/yandex
```

Если этой строки нет, значит роутер не загрузился.

### 3. Проверьте, что файл существует

```bash
ls -la server/routes/auth-yandex.ts
```

Файл должен существовать.

### 4. Проверьте переменные окружения

Убедитесь, что в `.env.local` или `.env` есть:
```env
YANDEX_CLIENT_ID=2710959716ba49f48959f7a533e7aadd
YANDEX_CLIENT_SECRET=6d9c6fa7a40042a7bebadc3edeb5df77
FRONTEND_URL=http://localhost:5173
```

### 5. Проверьте порт сервера

Сервер работает на порту **3001** (не 5000!).

Frontend должен обращаться к:
- Backend API: `http://localhost:3001/api/auth/yandex`

Если используете прокси Vite, он должен правильно перенаправлять запросы.

### 6. Проверьте работу роута

После перезапуска попробуйте:
```bash
curl http://localhost:3001/api/auth/yandex
```

Должно произойти перенаправление на Яндекс (HTTP 302 или 307).

## Если проблема сохраняется

1. Проверьте, нет ли ошибок при загрузке модуля в логах сервера
2. Убедитесь, что файл `auth-yandex.ts` не содержит синтаксических ошибок
3. Проверьте, что все зависимости установлены (`cookie-parser`)

## Готово

После перезапуска сервера OAuth должен заработать!

