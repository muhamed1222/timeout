# üîß –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–û–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –ü–û–î–ö–õ–Æ–ß–ï–ù–ò–Ø –ö SUPABASE

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê

–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö Supabase –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞. –í—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç:
- Pooler (–ø–æ—Ä—Ç 6543) - —Ç–∞–π–º–∞—É—Ç—ã/ECONNRESET
- –ü—Ä—è–º–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ - —Ö–æ—Å—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã (ENOTFOUND)

## ‚úÖ –ß–¢–û –Ø –£–ñ–ï –°–î–ï–õ–ê–õ

1. ‚úÖ –î–æ–±–∞–≤–∏–ª —Ç–∞–π–º–∞—É—Ç—ã –¥–ª—è –≤—Å–µ—Ö API –∑–∞–ø—Ä–æ—Å–æ–≤ (8 —Å–µ–∫—É–Ω–¥)
2. ‚úÖ –£–ª—É—á—à–∏–ª –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ
3. ‚úÖ –î–æ–±–∞–≤–∏–ª fallback –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –ë–î
4. ‚úÖ –î–æ–±–∞–≤–∏–ª —Ç–∞–π–º–∞—É—Ç—ã –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (5 —Å–µ–∫—É–Ω–¥)

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ø–µ—Ä—å –ù–ï –∑–∞–≤–∏—Å–∞–µ—Ç**, –Ω–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≤—Å–µ –µ—â–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞.

## üîß –†–ï–®–ï–ù–ò–ï (–ù–£–ñ–ù–û –°–î–ï–õ–ê–¢–¨ –í–†–£–ß–ù–£–Æ)

### –®–∞–≥ 1: –ü–æ–ª—É—á–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π Connection String

1. –û—Ç–∫—Ä–æ–π—Ç–µ **Supabase Dashboard**: https://supabase.com/dashboard
2. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç **chkziqbxvdzwhlucfrza**
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ: **Settings** ‚Üí **Database**
4. –ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª **"Connection string"**
5. –í—ã–±–µ—Ä–∏—Ç–µ –≤–∫–ª–∞–¥–∫—É **"Direct connection"** (–ù–ï Connection Pooling!)
6. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ connection string - –æ–Ω –¥–æ–ª–∂–µ–Ω –≤—ã–≥–ª—è–¥–µ—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫:
   ```
   postgresql://postgres.chkziqbxvdzwhlucfrza:–ü–ê–†–û–õ–¨@–•–û–°–¢:5432/postgres
   ```

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç–µ .env

1. –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
2. –ù–∞–π–¥–∏—Ç–µ —Å—Ç—Ä–æ–∫—É `DATABASE_URL=`
3. –ó–∞–º–µ–Ω–∏—Ç–µ –µ—ë –Ω–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–π connection string –∏–∑ Supabase Dashboard
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª

### –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä

```bash
npm run dev
```

## üìù –ê–õ–¨–¢–ï–†–ù–ê–¢–ò–í–ê: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç

–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è connection string –∏–∑ Dashboard:

```bash
./scripts/update-db-url.sh "postgresql://postgres.user:password@host:5432/postgres"
```

## ‚ö†Ô∏è –í–ê–ñ–ù–û

**–¢–µ–∫—É—â–∏–π Connection String –≤ .env –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º –≤–∞—à–µ–≥–æ Supabase –ø—Ä–æ–µ–∫—Ç–∞.**

–ü–æ—Å–ª–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è IP –∞–¥—Ä–µ—Å–∞ –≤ Supabase –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è:
- –ù–µ—Å–∫–æ–ª—å–∫–æ –º–∏–Ω—É—Ç –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç Connection String (–¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ Dashboard)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ IP –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω

## üß™ –ü–†–û–í–ï–†–ö–ê –ü–û–°–õ–ï –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

```bash
npx tsx scripts/test-db-connection.ts
```

–ï—Å–ª–∏ —É–≤–∏–¥–∏—Ç–µ `‚úÖ –£–°–ü–ï–•!` - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç!

