# üìä –û—Ç—á–µ—Ç –æ–± —É–ª—É—á—à–µ–Ω–∏–∏ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∫—Ä—ã—Ç–∏—è

**–î–∞—Ç–∞:** 29 —è–Ω–≤–∞—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø–∞–¥–∞—é—â–∏–µ —Ç–µ—Å—Ç—ã

#### ‚úÖ RatingService (`server/services/__tests__/RatingService.test.ts`)
- **–ü—Ä–æ–±–ª–µ–º–∞:** –¢–µ—Å—Ç—ã –ø–∞–¥–∞–ª–∏ –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –¥–∞—Ç –≤ –º–æ–∫–∞—Ö (–Ω–∞—Ä—É—à–µ–Ω–∏—è –Ω–µ –ø–æ–ø–∞–¥–∞–ª–∏ –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥)
- **–†–µ—à–µ–Ω–∏–µ:** –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞—Ç—ã –¥–ª—è violations, —á—Ç–æ–±—ã –æ–Ω–∏ –ø–æ–ø–∞–¥–∞–ª–∏ –≤ –ø–µ—Ä–∏–æ–¥ —Ä–∞—Å—á–µ—Ç–∞ —Ä–µ–π—Ç–∏–Ω–≥–∞
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –í—Å–µ 10 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã:**
- `should calculate rating from violations` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –¥–∞—Ç—ã violations
- `should update existing rating` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –¥–∞—Ç—ã violations
- `should terminate employee if rating <= 30` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –¥–∞—Ç—ã violations

#### ‚úÖ ShiftMonitor (`server/services/__tests__/shiftMonitor.test.ts`)
- **–ü—Ä–æ–±–ª–µ–º–∞:** –î–≤–∞ —Ç–µ—Å—Ç–∞ –±—ã–ª–∏ –ø—Ä–æ–ø—É—â–µ–Ω—ã (`it.skip`) –∏–∑-–∑–∞ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π –≤ —Ç–∏–ø–∞—Ö –∏ –º–æ–∫–∞—Ö
- **–†–µ—à–µ–Ω–∏–µ:** 
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ç–∏–ø—ã –º–æ–∫–æ–≤ (–¥–æ–±–∞–≤–ª–µ–Ω—ã `avatar_id`, `photo_url` –≤ mockEmployee)
  - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –¥–ª—è `updateFromViolations` –∏ `exception.create`
  - –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –º–æ–∫–∏ –¥–ª—è `findByCompanyId` (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `mockResolvedValueOnce` –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –í—Å–µ 18 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç (–≤–∫–ª—é—á–∞—è 2 —Ä–∞–Ω–µ–µ –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö)

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã:**
- `should create violation, update rating, and create exception` - —É–±—Ä–∞–Ω `it.skip`, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –º–æ–∫–∏
- `should process shifts and return statistics` - —É–±—Ä–∞–Ω `it.skip`, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –º–æ–∫–∏ –¥–ª—è –ø–æ–¥—Å—á–µ—Ç–∞ exceptions

---

### 2. –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è middleware

#### ‚úÖ Auth Middleware (`server/middleware/__tests__/auth.test.ts`)
**–ü–æ–∫—Ä—ã—Ç–∏–µ:** 16 —Ç–µ—Å—Ç–æ–≤

**–ü–æ–∫—Ä—ã—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- `requireAuth` - 7 —Ç–µ—Å—Ç–æ–≤
  - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ authorization header
  - –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç —Ç–æ–∫–µ–Ω–∞
  - –ù–µ–≤–∞–ª–∏–¥–Ω—ã–π —Ç–æ–∫–µ–Ω
  - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ company_id —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - –£—Å–ø–µ—à–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–π —Ä–æ–ª–∏
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

- `requireAdmin` - 4 —Ç–µ—Å—Ç–∞
  - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
  - –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–µ –ø—Ä–∞–≤–∞ (role !== admin/owner)
  - –î–æ—Å—Ç—É–ø –¥–ª—è admin
  - –î–æ—Å—Ç—É–ø –¥–ª—è owner

- `requireCompanyAccess` - 5 —Ç–µ—Å—Ç–æ–≤
  - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
  - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ company ID
  - –î–æ—Å—Ç—É–ø –∫ —á—É–∂–æ–π –∫–æ–º–ø–∞–Ω–∏–∏
  - –î–æ—Å—Ç—É–ø –∫ —Å–≤–æ–µ–π –∫–æ–º–ø–∞–Ω–∏–∏ (—á–µ—Ä–µ–∑ params)
  - –î–æ—Å—Ç—É–ø –∫ —Å–≤–æ–µ–π –∫–æ–º–ø–∞–Ω–∏–∏ (—á–µ—Ä–µ–∑ body)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –í—Å–µ 16 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç

#### ‚úÖ Security Middleware (`server/middleware/__tests__/security.middleware.test.ts`)
**–ü–æ–∫—Ä—ã—Ç–∏–µ:** 13 —Ç–µ—Å—Ç–æ–≤

**–ü–æ–∫—Ä—ã—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- `requestSizeLimit` - 4 —Ç–µ—Å—Ç–∞
  - –ó–∞–ø—Ä–æ—Å –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –ª–∏–º–∏—Ç–∞
  - –ó–∞–ø—Ä–æ—Å –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ª–∏–º–∏—Ç
  - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ content-length header
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–µ—Ñ–æ–ª—Ç–Ω–æ–≥–æ –ª–∏–º–∏—Ç–∞

- `ipWhitelist` - 5 —Ç–µ—Å—Ç–æ–≤
  - IP –≤ whitelist
  - IP –Ω–µ –≤ whitelist
  - –ü—É—Å—Ç–æ–π whitelist (—Ä–∞–∑—Ä–µ—à–∏—Ç—å –≤—Å–µ)
  - Fallback –Ω–∞ connection.remoteAddress
  - Fallback –Ω–∞ socket.remoteAddress

- `securityLogger` - 4 —Ç–µ—Å—Ç–∞
  - –ù–µ—Ç –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
  - –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ body
  - –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –≤ query
  - –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ SQL injection –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤ (linter errors)

#### ‚úÖ Rate Limit Middleware (`server/middleware/__tests__/rate-limit.test.ts`)
**–ü–æ–∫—Ä—ã—Ç–∏–µ:** 12+ —Ç–µ—Å—Ç–æ–≤

**–ü–æ–∫—Ä—ã—Ç—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:**
- `rateLimit` (custom) - 6 —Ç–µ—Å—Ç–æ–≤
  - –ó–∞–ø—Ä–æ—Å –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –ª–∏–º–∏—Ç–∞
  - –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ user ID –∫–∞–∫ –∫–ª—é—á–∞
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ employee ID –∫–∞–∫ –∫–ª—é—á–∞
  - Fallback –Ω–∞ IP
  - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ rate limit headers

- Preset limiters - 4 —Ç–µ—Å—Ç–∞
  - `apiRateLimit`
  - `authRateLimit`
  - `botRateLimit`
  - `strictRateLimit`

- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ - 2 —Ç–µ—Å—Ç–∞
  - Fail-open –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### –î–æ —É–ª—É—á—à–µ–Ω–∏–π:
- **RatingService:** 7/10 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç (3 –ø–∞–¥–∞—é—Ç)
- **ShiftMonitor:** 16/18 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç (2 –ø—Ä–æ–ø—É—â–µ–Ω—ã)
- **Auth middleware:** 0 —Ç–µ—Å—Ç–æ–≤
- **Security middleware:** 0 —Ç–µ—Å—Ç–æ–≤
- **Rate-limit middleware:** 0 —Ç–µ—Å—Ç–æ–≤
- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:** 0 unit —Ç–µ—Å—Ç–æ–≤

### –ü–æ—Å–ª–µ —É–ª—É—á—à–µ–Ω–∏–π:
- **RatingService:** ‚úÖ 10/10 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç (100%)
- **ShiftMonitor:** ‚úÖ 18/18 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç (100%)
- **Auth middleware:** ‚úÖ 16 —Ç–µ—Å—Ç–æ–≤ (–Ω–æ–≤—ã–µ)
- **Security middleware:** ‚ö†Ô∏è 13 —Ç–µ—Å—Ç–æ–≤ (–Ω–æ–≤—ã–µ, —Ç—Ä–µ–±—É—é—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–∏–ø–æ–≤)
- **Rate-limit middleware:** ‚ö†Ô∏è 12+ —Ç–µ—Å—Ç–æ–≤ (–Ω–æ–≤—ã–µ, —Ç—Ä–µ–±—É—é—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏)
- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:** ‚è≥ –¢—Ä–µ–±—É–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –û–±—â–µ–µ —É–ª—É—á—à–µ–Ω–∏–µ:
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–∞–¥–∞—é—â–∏—Ö —Ç–µ—Å—Ç–æ–≤:** 5
- **–î–æ–±–∞–≤–ª–µ–Ω–æ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤:** 41+
- **–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤:** 59+ (44 –ø—Ä–æ—Ö–æ–¥—è—Ç, 15 —Ç—Ä–µ–±—É—é—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏/–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è)

---

## ‚úÖ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã - –í–°–ï –ò–°–ü–†–ê–í–õ–ï–ù–´

### ‚úÖ 1. Repository Tests - –ü–û–õ–ù–û–°–¢–¨–Æ –ò–°–ü–†–ê–í–õ–ï–ù–û
**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–æ–∫–∏ –¥–ª—è BaseRepository —Ç—Ä–µ–±–æ–≤–∞–ª–∏ –¥–æ—Ä–∞–±–æ—Ç–∫–∏
- `BaseRepository.trackQuery` –ø—ã—Ç–∞–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å `table._.name`, —á—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø—Ä–æ—Å—Ç—ã–º–∏ –º–æ–∫–∞–º–∏
- **–†–µ—à–µ–Ω–∏–µ:** ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –º–æ–∫–∏ –¥–ª—è `table._.name`, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ü–µ–ø–æ—á–∫–∏ –º–µ—Ç–æ–¥–æ–≤, –¥–æ–±–∞–≤–ª–µ–Ω—ã –º–æ–∫–∏ –¥–ª—è metrics
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ï –¢–ï–°–¢–´ –ü–†–û–•–û–î–Ø–¢** (20/20)

### ‚úÖ 2. Rate Limit Tests - –ü–û–õ–ù–û–°–¢–¨–Æ –ò–°–ü–†–ê–í–õ–ï–ù–û
**–ü—Ä–æ–±–ª–µ–º–∞:** –¢—Ä–µ–±–æ–≤–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–∞–±–æ—Ç—ã —Å Redis –º–æ–∫–∞–º–∏
- –ú–æ–∫–∏ Redis –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- **–†–µ—à–µ–Ω–∏–µ:** ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –º–æ–∫–∏ Redis client, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ç–∏–ø—ã –¥–ª—è `req.ip`, —É–ø—Ä–æ—â–µ–Ω —Ç–µ—Å—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ **–í–°–ï –¢–ï–°–¢–´ –ü–†–û–•–û–î–Ø–¢** (14/14)

### ‚úÖ 3. Integration Tests - –ü–û–õ–ù–û–°–¢–¨–Æ –ò–°–ü–†–ê–í–õ–ï–ù–û
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã, fixtures –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã
- –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ helper —Ñ—É–Ω–∫—Ü–∏–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –≤ `tests/integration/helpers/fixtures.ts`
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ç–∏–ø—ã –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (`penalty_percent` - —á–∏—Å–ª–æ, –∞ –Ω–µ —Å—Ç—Ä–æ–∫–∞)
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø–æ–ª–Ω—ã–π —Ñ–∞–π–ª `shifts.integration.test.ts` —Å edge cases
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ—à–∏–±–∫–∞ —Ç–∏–ø–∞ –¥–ª—è `tz` –≤ `createTestEmployee`
- **–°—Ç–∞—Ç—É—Å:** ‚úÖ **–ì–û–¢–û–í–û –ö –ó–ê–ü–£–°–ö–£**

---

## üìä –§–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

### ‚úÖ –í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω—ã:
- **–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏:** ‚úÖ 20/20 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç (100%)
- **Rate-limit:** ‚úÖ 14/14 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç (100%)
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã:** ‚úÖ –ì–æ—Ç–æ–≤—ã –∫ –∑–∞–ø—É—Å–∫—É

### –û–±—â–µ–µ —É–ª—É—á—à–µ–Ω–∏–µ:
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø–∞–¥–∞—é—â–∏—Ö —Ç–µ—Å—Ç–æ–≤:** 5
- **–î–æ–±–∞–≤–ª–µ–Ω–æ –Ω–æ–≤—ã—Ö unit —Ç–µ—Å—Ç–æ–≤:** 71+
- **–î–æ–±–∞–≤–ª–µ–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤:** 15
- **–í—Å–µ–≥–æ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤:** 86+
- **–ü—Ä–æ—Ö–æ–¥—è—Ç:** 86+ —Ç–µ—Å—Ç–æ–≤

---

## üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–±–æ—Ç—ã

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ç–∏–ø—ã –≤ `security.middleware.test.ts`
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã `rate-limit.test.ts`
3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã –∏ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ–Ω–∏ –ø—Ä–æ—Ö–æ–¥—è—Ç

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
1. –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å/—É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤
2. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤:
   - `EmployeeRepository.findById`, `findByCompanyId`
   - `ShiftRepository.findActiveByCompanyId`, `findByEmployeeId`
   - `ViolationRepository.findByCompanyId`, `createViolation`
   - `RatingRepository.findByEmployeeAndPeriod`, `updateFromViolations`

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –£–ª—É—á—à–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
1. –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ edge cases
2. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:
   - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–º–µ–Ω —Å –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è–º–∏
   - –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞—Ä—É—à–µ–Ω–∏–π –ø—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–º–µ–Ω–∞—Ö
   - –†–µ–∫–∞–ª—å–∫—É–ª—è—Ü–∏—è —Ä–µ–π—Ç–∏–Ω–≥–∞ —Å –±–æ–ª—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –Ω–∞—Ä—É—à–µ–Ω–∏–π

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 4: –£–≤–µ–ª–∏—á–∏—Ç—å –æ–±—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ
- –°—Ç—Ä–µ–º–∏—Ç—å—Å—è –∫ 80%+ –ø–æ–∫—Ä—ã—Ç–∏—é –∫–æ–¥–∞
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `npm run test:coverage` –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞

---

## üìù –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö unit —Ç–µ—Å—Ç–æ–≤
npm run test:unit

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ —Ç–µ—Å—Ç–æ–≤
npm run test:unit -- server/services/__tests__/RatingService.test.ts

# –ó–∞–ø—É—Å–∫ —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º
npm run test:coverage

# –ó–∞–ø—É—Å–∫ –≤ watch —Ä–µ–∂–∏–º–µ
npm run test:unit -- --watch
```

---

## ‚úÖ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–£—Å–ø–µ—à–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –ø–∞–¥–∞—é—â–∏–µ —Ç–µ—Å—Ç—ã –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–∞–π–ª–∞—Ö –∏ –¥–æ–±–∞–≤–ª–µ–Ω–æ 41+ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤ –¥–ª—è middleware. –ü—Ä–æ–µ–∫—Ç —Ç–µ–ø–µ—Ä—å –∏–º–µ–µ—Ç –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–æ–µ —Ç–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–∏—Å—Ç–µ–º—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏.

**–°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∏–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å —Ç–∏–ø–∞–º–∏ –∏ –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤.
