# –û—Ç—á–µ—Ç –æ –ø–æ–∫—Ä—ã—Ç–∏–∏ —Ç–µ—Å—Ç–∞–º–∏

**–î–∞—Ç–∞:** –Ø–Ω–≤–∞—Ä—å 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –¢–µ—Å—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã

---

## ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

### 1. Validation Middleware ‚úÖ
**–§–∞–π–ª:** `server/middleware/__tests__/validate.test.ts`

**–ü–æ–∫—Ä—ã—Ç–∏–µ:**
- ‚úÖ `validateBody` - –≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞
- ‚úÖ `validateParams` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ URL
- ‚úÖ `validateQuery` - –≤–∞–ª–∏–¥–∞—Ü–∏—è query –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª–µ–π
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

**–¢–µ—Å—Ç—ã:** 7 —Ç–µ—Å—Ç–æ–≤

---

### 2. Error Handler ‚úÖ
**–§–∞–π–ª:** `server/lib/__tests__/errorHandler.test.ts`

**–ü–æ–∫—Ä—ã—Ç–∏–µ:**
- ‚úÖ `NotFoundError` - –∫–ª–∞—Å—Å –æ—à–∏–±–∫–∏ –¥–ª—è 404
- ‚úÖ `ValidationError` - –∫–ª–∞—Å—Å –æ—à–∏–±–∫–∏ –¥–ª—è 400
- ‚úÖ `asyncHandler` - –æ–±–µ—Ä—Ç–∫–∞ –¥–ª—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ Promise rejections

**–¢–µ—Å—Ç—ã:** 8 —Ç–µ—Å—Ç–æ–≤

---

### 3. Sanitization Middleware ‚úÖ
**–§–∞–π–ª:** `server/middleware/__tests__/sanitize.test.ts`

**–ü–æ–∫—Ä—ã—Ç–∏–µ:**
- ‚úÖ –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–æ–∫ –≤ body
- ‚úÖ –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
- ‚úÖ –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –º–∞—Å—Å–∏–≤–æ–≤
- ‚úÖ –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è query –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚úÖ –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è URL –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ null/undefined
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ-—Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

**–¢–µ—Å—Ç—ã:** 8 —Ç–µ—Å—Ç–æ–≤

---

## üìä –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

**–í—Å–µ–≥–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ —Ç–µ—Å—Ç–æ–≤:** 23 —Ç–µ—Å—Ç–∞  
**–ú–æ–¥—É–ª–∏ –ø–æ–∫—Ä—ã—Ç—ã:**
- ‚úÖ Validation middleware
- ‚úÖ Error handler
- ‚úÖ Sanitization middleware

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã
- ‚è≥ –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø–∞–¥–∞—é—â–∏–µ —Ç–µ—Å—Ç—ã –≤ `RatingService.test.ts`
- ‚è≥ –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø–∞–¥–∞—é—â–∏–µ —Ç–µ—Å—Ç—ã –≤ `shiftMonitor.test.ts`
- ‚è≥ –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å —Ç–∏–ø–∞–º–∏ –≤ —Ç–µ—Å—Ç–∞—Ö

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –º–æ–¥—É–ª–µ–π
- ‚è≥ –¢–µ—Å—Ç—ã –¥–ª—è `sanitize.ts` middleware
- ‚è≥ –¢–µ—Å—Ç—ã –¥–ª—è `security.middleware.ts`
- ‚è≥ –¢–µ—Å—Ç—ã –¥–ª—è `auth.ts` middleware
- ‚è≥ –¢–µ—Å—Ç—ã –¥–ª—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ (–±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω—ã–µ)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- ‚úÖ –£–∂–µ –µ—Å—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è API
- ‚è≥ –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ edge cases

---

## üìù –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö unit —Ç–µ—Å—Ç–æ–≤
npm run test:unit

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
npm run test:unit -- server/middleware/__tests__/validate.test.ts

# –ü–æ–∫—Ä—ã—Ç–∏–µ
npm run test:coverage

# –ü—Ä–æ—Å–º–æ—Ç—Ä HTML –æ—Ç—á–µ—Ç–∞
open coverage/index.html
```

---

**–°—Ç–∞—Ç—É—Å:** –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤ —Å–æ–∑–¥–∞–Ω–∞. –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –¥–æ–±–∞–≤–ª—è—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –º–æ–¥—É–ª–µ–π.
