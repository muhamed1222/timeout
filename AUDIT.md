# üîç –ê–£–î–ò–¢ –°–ò–°–¢–ï–ú–´ SHIFTMANAGER

## üìä –°–û–°–¢–û–Ø–ù–ò–ï –°–¢–†–ê–ù–ò–¶ –ò –§–£–ù–ö–¶–ò–ô

### ‚úÖ –†–ê–ë–û–¢–ê–Æ–©–ò–ï –°–¢–†–ê–ù–ò–¶–´

#### 1. **Telegram WebApp** (`/webapp`)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç —Å —Ä–µ–∞–ª—å–Ω—ã–º API

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –ø–æ telegram_user_id
- ‚úÖ –ù–∞—á–∞–ª–æ —Å–º–µ–Ω—ã (POST /api/webapp/shift/start)
- ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–º–µ–Ω—ã (POST /api/webapp/shift/end)
- ‚úÖ –ù–∞—á–∞–ª–æ –ø–µ—Ä–µ—Ä—ã–≤–∞ (POST /api/webapp/break/start)
- ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–µ—Ä–µ—Ä—ã–≤–∞ (POST /api/webapp/break/end)
- ‚úÖ –ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ Telegram WebApp –ø–æ–¥–ø–∏—Å–∏
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ (working/on_break/off_work)

**–ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é:** –î–∞

---

### ‚ö†Ô∏è –°–¢–†–ê–ù–ò–¶–´ –° –ú–û–ö–ê–ú–ò

#### 2. **–î–∞—à–±–æ—Ä–¥** (`/`)
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ mock-–¥–∞–Ω–Ω—ã—Ö

**–¢–µ–∫—É—â–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ (–º–æ–∫–∏)
- ‚úÖ –ö–∞—Ä—Ç–æ—á–∫–∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–º–µ–Ω (–º–æ–∫–∏)
- ‚úÖ –ü–æ–∏—Å–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ (—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –º–æ–∫–∞—Ö)
- ‚úÖ –ù–µ–¥–∞–≤–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å (–º–æ–∫–∏)
- ‚úÖ –ö–Ω–æ–ø–∫–∞ "–≠–∫—Å–ø–æ—Ä—Ç" (—Ä–∞–±–æ—Ç–∞–µ—Ç, —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç –º–æ–∫–∏ –≤ CSV)
- ‚ö†Ô∏è –ö–Ω–æ–ø–∫–∞ "–§–∏–ª—å—Ç—Ä" (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –±—É–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏)
- ‚ö†Ô∏è –ö–Ω–æ–ø–∫–∞ "–î–æ–±–∞–≤–∏—Ç—å" (–ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –±—É–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏)

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:**

```typescript
// 1. –ó–∞–º–µ–Ω–∏—Ç—å mock stats –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π API
const { data: stats } = useQuery({
  queryKey: ['/api/companies/:companyId/stats'],
});

// 2. –ó–∞–º–µ–Ω–∏—Ç—å mock shifts –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–π API
const { data: activeShifts } = useQuery({
  queryKey: ['/api/companies/:companyId/shifts/active'],
});

// 3. –ü–æ–ª—É—á–∏—Ç—å company_id –∏–∑ Supabase Auth
const { data: { user } } = await supabase.auth.getUser();
const companyId = user?.user_metadata?.company_id;

// 4. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É
const handleAddEmployee = () => {
  // –û—Ç–∫—Ä—ã—Ç—å –¥–∏–∞–ª–æ–≥ —Å —Ñ–æ—Ä–º–æ–π
  // POST /api/employees
};
```

**–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ API endpoints:** ‚úÖ –£–∂–µ –µ—Å—Ç—å
- GET `/api/companies/:companyId/shifts/active`
- GET `/api/companies/:companyId/employees`

**–ü–ª–∞–Ω —Ä–∞–±–æ—Ç:**
1. –°–æ–∑–¥–∞—Ç—å —Ö—É–∫ `useAuth()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è company_id –∏–∑ Supabase
2. –ü–æ–¥–∫–ª—é—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ API endpoints –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∏ —Å–º–µ–Ω
3. –°–æ–∑–¥–∞—Ç—å Dialog/Modal –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
4. –î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ —Å—Ç–∞—Ç—É—Å—É —Å–º–µ–Ω—ã

---

#### 3. **–ò—Å–∫–ª—é—á–µ–Ω–∏—è** (`/exceptions`)
**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ mock-–¥–∞–Ω–Ω—ã—Ö

**–¢–µ–∫—É—â–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–π (–º–æ–∫–∏)
- ‚úÖ –ü–æ–∏—Å–∫ –∏—Å–∫–ª—é—á–µ–Ω–∏–π (—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –º–æ–∫–∞—Ö)
- ‚úÖ –§–∏–ª—å—Ç—Ä—ã –ø–æ –≤–∞–∂–Ω–æ—Å—Ç–∏ (—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –º–æ–∫–∞—Ö)
- ‚úÖ –§–∏–ª—å—Ç—Ä—ã –ø–æ —Ç–∏–ø—É (—Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –º–æ–∫–∞—Ö)
- ‚úÖ –û—á–∏—Å—Ç–∫–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏:**

```typescript
// 1. –ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
const { data: exceptions } = useQuery({
  queryKey: ['/api/companies/:companyId/exceptions'],
});

// 2. –î–æ–±–∞–≤–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è
const resolveException = useMutation({
  mutationFn: (id: string) => 
    apiRequest('PUT', `/api/exceptions/${id}/resolve`),
  onSuccess: () => {
    queryClient.invalidateQueries({ queryKey: ['/api/companies/:companyId/exceptions'] });
  }
});

// 3. –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–†–∞–∑—Ä–µ—à–∏—Ç—å" –Ω–∞ –∫–∞–∂–¥—É—é –∫–∞—Ä—Ç–æ—á–∫—É
```

**–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ API endpoints:** ‚úÖ –£–∂–µ –µ—Å—Ç—å
- GET `/api/companies/:companyId/exceptions`
- PUT `/api/exceptions/:id/resolve`

**–ü–ª–∞–Ω —Ä–∞–±–æ—Ç:**
1. –ü–æ–¥–∫–ª—é—á–∏—Ç—å —Ä–µ–∞–ª—å–Ω—ã–π API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏—Å–∫–ª—é—á–µ–Ω–∏–π
2. –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–†–∞–∑—Ä–µ—à–∏—Ç—å" –Ω–∞ ExceptionCard
3. –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞ (optional)

---

### üöß –ó–ê–ì–õ–£–®–ö–ò (–í –†–ê–ó–†–ê–ë–û–¢–ö–ï)

#### 4. **–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏** (`/employees`)
**–°—Ç–∞—Ç—É—Å:** üöß –ó–∞–≥–ª—É—à–∫–∞ "–†–∞–∑–¥–µ–ª –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ"

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**

```typescript
// –°–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π –∏ –ø–æ–∏—Å–∫–æ–º
const { data: employees } = useQuery({
  queryKey: ['/api/companies/:companyId/employees'],
});

// –§—É–Ω–∫—Ü–∏–∏:
// - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
// - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ (—Å —Ñ–æ—Ä–º–æ–π)
// - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
// - –°–æ–∑–¥–∞–Ω–∏–µ invite-–∫–æ–¥–∞
// - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è QR-–∫–æ–¥–∞ –¥–ª—è –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
// - –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ —Å–º–µ–Ω —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
// - –î–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
```

**–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ API endpoints:** ‚úÖ –£–∂–µ –µ—Å—Ç—å
- GET `/api/companies/:companyId/employees`
- POST `/api/employees`
- PUT `/api/employees/:id`
- POST `/api/employee-invites`
- GET `/api/employee-invites/:code/link`
- GET `/api/employees/:employeeId/shifts`

**UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è:**
- EmployeeList (—Ç–∞–±–ª–∏—Ü–∞/–∫–∞—Ä—Ç–æ—á–∫–∏)
- EmployeeForm (–¥–∏–∞–ª–æ–≥ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
- InviteDialog (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ QR-–∫–æ–¥–∞)
- EmployeeDetailsSheet (–±–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å —Å –¥–µ—Ç–∞–ª—è–º–∏)

---

#### 5. **–û—Ç—á–µ—Ç—ã** (`/reports`)
**–°—Ç–∞—Ç—É—Å:** üöß –ó–∞–≥–ª—É—à–∫–∞ "–†–∞–∑–¥–µ–ª –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ"

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**

```typescript
// –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç—á–µ—Ç–æ–≤
const { data: reports } = useQuery({
  queryKey: ['/api/companies/:companyId/daily-reports'],
});

// –§—É–Ω–∫—Ü–∏–∏:
// - –ü—Ä–æ—Å–º–æ—Ç—Ä –µ–∂–µ–¥–Ω–µ–≤–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
// - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–µ, —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É
// - –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–æ–≤ –≤ Excel/PDF
// - –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ (–≥—Ä–∞—Ñ–∏–∫–∏ –ø–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–º –∑–∞–¥–∞—á–∞–º)
```

**–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ API endpoints:** ‚úÖ –£–∂–µ –µ—Å—Ç—å
- GET `/api/companies/:companyId/daily-reports`
- GET `/api/shifts/:shiftId/daily-report`

**UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è:**
- ReportsList (—Ç–∞–±–ª–∏—Ü–∞ –æ—Ç—á–µ—Ç–æ–≤)
- ReportDetails (–¥–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä)
- ReportFilters (—Ñ–∏–ª—å—Ç—Ä—ã –ø–æ –¥–∞—Ç–∞–º)
- ReportCharts (–≥—Ä–∞—Ñ–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞)

---

#### 6. **–ì—Ä–∞—Ñ–∏–∫–∏** (`/schedules`)
**–°—Ç–∞—Ç—É—Å:** üöß –ó–∞–≥–ª—É—à–∫–∞ "–†–∞–∑–¥–µ–ª –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ"

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**

```typescript
// API endpoints –û–¢–°–£–¢–°–¢–í–£–Æ–¢ - –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å!

// –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ endpoints:
// GET /api/companies/:companyId/schedule-templates
// POST /api/schedule-templates
// PUT /api/schedule-templates/:id
// POST /api/employee-schedule (–Ω–∞–∑–Ω–∞—á–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É)
// POST /api/companies/:companyId/generate-shifts (—Å–æ–∑–¥–∞—Ç—å —Å–º–µ–Ω—ã –ø–æ –≥—Ä–∞—Ñ–∏–∫—É)

// –§—É–Ω–∫—Ü–∏–∏:
// - –°–æ–∑–¥–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤ –≥—Ä–∞—Ñ–∏–∫–æ–≤
// - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º
// - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–º–µ–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤
// - –ö–∞–ª–µ–Ω–¥–∞—Ä—å —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π –≥—Ä–∞—Ñ–∏–∫–æ–≤
```

**–ü–ª–∞–Ω —Ä–∞–±–æ—Ç:**
1. ‚ö†Ô∏è –°–æ–∑–¥–∞—Ç—å API endpoints –¥–ª—è schedule_template
2. ‚ö†Ô∏è –°–æ–∑–¥–∞—Ç—å API endpoints –¥–ª—è employee_schedule
3. ‚ö†Ô∏è –°–æ–∑–¥–∞—Ç—å API –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–º–µ–Ω –∏–∑ –≥—Ä–∞—Ñ–∏–∫–æ–≤
4. –°–æ–∑–¥–∞—Ç—å UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–∞–º–∏
5. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–∞–ª–µ–Ω–¥–∞—Ä—å (react-big-calendar –∏–ª–∏ fullcalendar)

---

#### 7. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** (`/settings`)
**–°—Ç–∞—Ç—É—Å:** üöß –ó–∞–≥–ª—É—à–∫–∞ "–†–∞–∑–¥–µ–ª –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ"

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**

```typescript
// –õ–∏—á–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
// - –°–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è
// - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
// - –Ø–∑—ã–∫ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
// - –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å
```

**–ü–ª–∞–Ω —Ä–∞–±–æ—Ç:**
1. –°–æ–∑–¥–∞—Ç—å —Ñ–æ—Ä–º—É –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
2. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å Supabase Auth (—Å–º–µ–Ω–∞ –ø–∞—Ä–æ–ª—è)
3. –î–æ–±–∞–≤–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (—è–∑—ã–∫, —Ç–µ–º–∞)

---

#### 8. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–ø–∞–Ω–∏–∏** (`/company`)
**–°—Ç–∞—Ç—É—Å:** üöß –ó–∞–≥–ª—É—à–∫–∞ "–†–∞–∑–¥–µ–ª –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ"

**–ß—Ç–æ –Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å:**

```typescript
// –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–ø–∞–Ω–∏–∏
const { data: company } = useQuery({
  queryKey: ['/api/companies/:companyId'],
});

// –§—É–Ω–∫—Ü–∏–∏:
// - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–∏
// - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —á–∞—Å–æ–≤–æ–≥–æ –ø–æ—è—Å–∞
// - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (–ø–æ—Ä–æ–≥–∏ –æ–ø–æ–∑–¥–∞–Ω–∏–π, –ø–µ—Ä–µ—Ä—ã–≤–æ–≤)
// - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ privacy settings
// - –ó–∞–≥—Ä—É–∑–∫–∞ –ª–æ–≥–æ—Ç–∏–ø–∞ –∫–æ–º–ø–∞–Ω–∏–∏
```

**–ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ API endpoints:** ‚úÖ –£–∂–µ –µ—Å—Ç—å
- GET `/api/companies/:id`
- PUT `/api/companies/:id` (–Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å!)

**–ü–ª–∞–Ω —Ä–∞–±–æ—Ç:**
1. ‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å PUT endpoint –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–∏
2. –°–æ–∑–¥–∞—Ç—å —Ñ–æ—Ä–º—É –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫–æ–º–ø–∞–Ω–∏–∏
3. –î–æ–±–∞–≤–∏—Ç—å –∑–∞–≥—Ä—É–∑–∫—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π (–ª–æ–≥–æ—Ç–∏–ø)

---

## üîå –ì–û–¢–û–í–´–ï API ENDPOINTS

### ‚úÖ Companies
- POST `/api/companies` - –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏
- GET `/api/companies/:id` - –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏

### ‚úÖ Employees
- POST `/api/employees` - –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
- GET `/api/employees/:id` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
- GET `/api/companies/:companyId/employees` - –°–ø–∏—Å–æ–∫ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- PUT `/api/employees/:id` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
- GET `/api/employees/telegram/:telegramUserId` - –ü–æ–∏—Å–∫ –ø–æ Telegram ID

### ‚úÖ Employee Invites
- POST `/api/employee-invites` - –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
- GET `/api/employee-invites/:code` - –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
- POST `/api/employee-invites/:code/use` - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è
- GET `/api/employee-invites/:code/link` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è deep link + QR code

### ‚úÖ Shifts
- POST `/api/shifts` - –°–æ–∑–¥–∞–Ω–∏–µ —Å–º–µ–Ω—ã
- GET `/api/shifts/:id` - –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–º–µ–Ω—ã
- GET `/api/employees/:employeeId/shifts` - –°–º–µ–Ω—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
- GET `/api/companies/:companyId/shifts/active` - –ê–∫—Ç–∏–≤–Ω—ã–µ —Å–º–µ–Ω—ã –∫–æ–º–ø–∞–Ω–∏–∏
- PUT `/api/shifts/:id` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–º–µ–Ω—ã
- POST `/api/shifts/:id/start` - –ù–∞—á–∞–ª–æ —Å–º–µ–Ω—ã (—á–µ—Ä–µ–∑ –±–æ—Ç)
- POST `/api/shifts/:id/end` - –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–º–µ–Ω—ã (—á–µ—Ä–µ–∑ –±–æ—Ç)
- POST `/api/shifts/:id/break/start` - –ù–∞—á–∞–ª–æ –ø–µ—Ä–µ—Ä—ã–≤–∞
- POST `/api/shifts/:id/break/end` - –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–µ—Ä–µ—Ä—ã–≤–∞

### ‚úÖ Work Intervals
- POST `/api/work-intervals` - –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞
- GET `/api/shifts/:shiftId/work-intervals` - –ò–Ω—Ç–µ—Ä–≤–∞–ª—ã —Å–º–µ–Ω—ã
- PUT `/api/work-intervals/:id` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞

### ‚úÖ Break Intervals
- POST `/api/break-intervals` - –°–æ–∑–¥–∞–Ω–∏–µ –ø–µ—Ä–µ—Ä—ã–≤–∞
- GET `/api/shifts/:shiftId/break-intervals` - –ü–µ—Ä–µ—Ä—ã–≤—ã —Å–º–µ–Ω—ã

### ‚úÖ Daily Reports
- POST `/api/daily-reports` - –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞
- GET `/api/shifts/:shiftId/daily-report` - –û—Ç—á–µ—Ç —Å–º–µ–Ω—ã
- GET `/api/companies/:companyId/daily-reports` - –û—Ç—á–µ—Ç—ã –∫–æ–º–ø–∞–Ω–∏–∏

### ‚úÖ Exceptions
- POST `/api/exceptions` - –°–æ–∑–¥–∞–Ω–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
- GET `/api/companies/:companyId/exceptions` - –ò—Å–∫–ª—é—á–µ–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–∏
- PUT `/api/exceptions/:id/resolve` - –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è

### ‚úÖ Monitoring
- POST `/api/companies/:companyId/monitor` - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–æ–º–ø–∞–Ω–∏–∏
- POST `/api/monitor/global` - –ì–ª–æ–±–∞–ª—å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- GET `/api/companies/:companyId/violations` - –ù–∞—Ä—É—à–µ–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–∏

### ‚úÖ Telegram
- POST `/api/telegram/webhook` - Webhook –¥–ª—è Telegram –±–æ—Ç–∞
- GET `/api/webapp/employee/:telegramId` - –î–∞–Ω–Ω—ã–µ –¥–ª—è WebApp
- POST `/api/webapp/shift/start` - –ù–∞—á–∞–ª–æ —Å–º–µ–Ω—ã —á–µ—Ä–µ–∑ WebApp
- POST `/api/webapp/shift/end` - –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–º–µ–Ω—ã —á–µ—Ä–µ–∑ WebApp
- POST `/api/webapp/break/start` - –ù–∞—á–∞–ª–æ –ø–µ—Ä–µ—Ä—ã–≤–∞ —á–µ—Ä–µ–∑ WebApp
- POST `/api/webapp/break/end` - –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø–µ—Ä–µ—Ä—ã–≤–∞ —á–µ—Ä–µ–∑ WebApp

---

## ‚ö†Ô∏è –û–¢–°–£–¢–°–¢–í–£–Æ–©–ò–ï API ENDPOINTS

### üî¥ –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å:

1. **PUT** `/api/companies/:id` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏
2. **GET** `/api/companies/:companyId/schedule-templates` - –°–ø–∏—Å–æ–∫ –≥—Ä–∞—Ñ–∏–∫–æ–≤
3. **POST** `/api/schedule-templates` - –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞
4. **PUT** `/api/schedule-templates/:id` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞
5. **DELETE** `/api/schedule-templates/:id` - –£–¥–∞–ª–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞
6. **POST** `/api/employee-schedule` - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É
7. **POST** `/api/companies/:companyId/generate-shifts` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–º–µ–Ω –∏–∑ –≥—Ä–∞—Ñ–∏–∫–∞
8. **GET** `/api/companies/:companyId/stats` - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–ª—è –¥–∞—à–±–æ—Ä–¥–∞

---

## üéØ –ü–†–ò–û–†–ò–¢–ï–ó–ò–†–û–í–ê–ù–ù–´–ô –ü–õ–ê–ù –†–ê–ë–û–¢

### üî• –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)

1. **–î–∞—à–±–æ—Ä–¥ - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ä–µ–∞–ª—å–Ω—ã–º –¥–∞–Ω–Ω—ã–º**
   - [ ] –°–æ–∑–¥–∞—Ç—å —Ö—É–∫ `useAuth()` –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è company_id
   - [ ] –°–æ–∑–¥–∞—Ç—å GET `/api/companies/:companyId/stats`
   - [ ] –ó–∞–º–µ–Ω–∏—Ç—å –º–æ–∫–∏ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
   - [ ] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –∑–∞–≥—Ä—É–∑–∫–∏ –∏ –æ—à–∏–±–æ–∫

2. **–ò—Å–∫–ª—é—á–µ–Ω–∏—è - –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ä–µ–∞–ª—å–Ω—ã–º –¥–∞–Ω–Ω—ã–º**
   - [ ] –ü–æ–¥–∫–ª—é—á–∏—Ç—å GET `/api/companies/:companyId/exceptions`
   - [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–†–∞–∑—Ä–µ—à–∏—Ç—å" –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∏
   - [ ] –ü–æ–¥–∫–ª—é—á–∏—Ç—å PUT `/api/exceptions/:id/resolve`

3. **–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ - –ø–æ–ª–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è**
   - [ ] –°–æ–∑–¥–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å–æ —Å–ø–∏—Å–∫–æ–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
   - [ ] –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
   - [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è invite-–∫–æ–¥–æ–≤ —Å QR
   - [ ] –ò—Å—Ç–æ—Ä–∏—è —Å–º–µ–Ω —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞

### üìä –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)

4. **–û—Ç—á–µ—Ç—ã - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è**
   - [ ] –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–ø–∏—Å–∫–∞ –æ—Ç—á–µ—Ç–æ–≤
   - [ ] –§–∏–ª—å—Ç—Ä—ã –ø–æ –¥–∞—Ç–µ –∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É
   - [ ] –î–µ—Ç–∞–ª—å–Ω—ã–π –ø—Ä–æ—Å–º–æ—Ç—Ä –æ—Ç—á–µ—Ç–∞
   - [ ] –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel

5. **–ì—Ä–∞—Ñ–∏–∫–∏ —Ä–∞–±–æ—Ç—ã**
   - [ ] –°–æ–∑–¥–∞—Ç—å API –¥–ª—è schedule_template
   - [ ] –°–æ–∑–¥–∞—Ç—å API –¥–ª—è employee_schedule
   - [ ] UI –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤
   - [ ] –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–º–µ–Ω –∏–∑ –≥—Ä–∞—Ñ–∏–∫–æ–≤
   - [ ] –ö–∞–ª–µ–Ω–¥–∞—Ä—å —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π

### üîß –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ)

6. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–º–ø–∞–Ω–∏–∏**
   - [ ] –°–æ–∑–¥–∞—Ç—å PUT `/api/companies/:id`
   - [ ] –§–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–º–ø–∞–Ω–∏–∏
   - [ ] –ó–∞–≥—Ä—É–∑–∫–∞ –ª–æ–≥–æ—Ç–∏–ø–∞

7. **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
   - [ ] –§–æ—Ä–º–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫
   - [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Supabase Auth
   - [ ] –°–º–µ–Ω–∞ —è–∑—ã–∫–∞/—Ç–µ–º—ã

---

## üìù –ò–¢–û–ì–û–í–ê–Ø –°–¢–ê–¢–ò–°–¢–ò–ö–ê

- ‚úÖ **–ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞—é—â–∏–µ:** 1 —Å—Ç—Ä–∞–Ω–∏—Ü–∞ (WebApp)
- ‚ö†Ô∏è **–° –º–æ–∫–∞–º–∏:** 2 —Å—Ç—Ä–∞–Ω–∏—Ü—ã (Dashboard, Exceptions)
- üöß **–ó–∞–≥–ª—É—à–∫–∏:** 5 —Å—Ç—Ä–∞–Ω–∏—Ü (Employees, Reports, Schedules, Settings, Company)

**API endpoints:**
- ‚úÖ –ì–æ—Ç–æ–≤–æ: 43 endpoints
- ‚ö†Ô∏è –ù—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å: 8 endpoints

**–û–±—â–∏–π –ø—Ä–æ–≥—Ä–µ—Å—Å:** ~35% —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –≥–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É
