# –°–≤–æ–¥–∫–∞ —É–ª—É—á—à–µ–Ω–∏–π –ø–æ–∫—Ä—ã—Ç–∏—è —Ç–µ—Å—Ç–∞–º–∏

**–î–∞—Ç–∞:** –Ø–Ω–≤–∞—Ä—å 2025  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –¢–µ—Å—Ç—ã –¥–æ–±–∞–≤–ª–µ–Ω—ã

---

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ

### 1. –î–æ–±–∞–≤–ª–µ–Ω—ã —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –º–æ–¥—É–ª–µ–π

#### ‚úÖ Error Handler (`server/lib/__tests__/errorHandler.test.ts`)
- ‚úÖ –¢–µ—Å—Ç—ã –¥–ª—è `NotFoundError` –∫–ª–∞—Å—Å–∞
- ‚úÖ –¢–µ—Å—Ç—ã –¥–ª—è `ValidationError` –∫–ª–∞—Å—Å–∞
- ‚úÖ –¢–µ—Å—Ç—ã –¥–ª—è `asyncHandler` –æ–±–µ—Ä—Ç–∫–∏
- ‚úÖ –í—Å–µ 9 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ

#### ‚úÖ Validation Middleware (`server/middleware/__tests__/validate.test.ts`)
- ‚úÖ –ë–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è `validateBody`, `validateParams`, `validateQuery`
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ —á–µ—Ä–µ–∑ error handler

#### ‚úÖ Sanitization Middleware (`server/middleware/__tests__/sanitize.test.ts`)
- ‚úÖ –ë–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏–∏
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ä–µ–∞–ª—å–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

---

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

**–î–æ–±–∞–≤–ª–µ–Ω–æ —Ç–µ—Å—Ç–æ–≤:** 23+ —Ç–µ—Å—Ç–∞  
**–ú–æ–¥—É–ª–∏ –ø–æ–∫—Ä—ã—Ç—ã:**
- ‚úÖ Error handler (9 —Ç–µ—Å—Ç–æ–≤)
- ‚è≥ Validation middleware (—Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏)
- ‚è≥ Sanitization middleware (—Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏)

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1: –î–æ—Ä–∞–±–æ—Ç–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã
1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã validation middleware –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å error handler
2. –û–±–Ω–æ–≤–∏—Ç—å —Ç–µ—Å—Ç—ã sanitization middleware –ø–æ–¥ —Ä–µ–∞–ª—å–Ω—É—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é
3. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø–∞–¥–∞—é—â–∏–µ —Ç–µ—Å—Ç—ã –≤ `RatingService.test.ts`
4. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø–∞–¥–∞—é—â–∏–µ —Ç–µ—Å—Ç—ã –≤ `shiftMonitor.test.ts`

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2: –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª–µ–π
1. –¢–µ—Å—Ç—ã –¥–ª—è `auth.ts` middleware
2. –¢–µ—Å—Ç—ã –¥–ª—è `security.middleware.ts`
3. –¢–µ—Å—Ç—ã –¥–ª—è `rate-limit.ts` middleware
4. –¢–µ—Å—Ç—ã –¥–ª—è `csrf.ts` middleware
5. –¢–µ—Å—Ç—ã –¥–ª—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–≤ (–±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω—ã–µ unit —Ç–µ—Å—Ç—ã)

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3: –£–ª—É—á—à–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
1. –î–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ edge cases
2. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ—Å—Ç—ã –¥–ª—è error scenarios
3. –£–ª—É—á—à–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ API endpoints

---

## üìù –ö–æ–º–∞–Ω–¥—ã

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö unit —Ç–µ—Å—Ç–æ–≤
npm run test:unit

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
npm run test:unit -- server/lib/__tests__/errorHandler.test.ts

# –ü–æ–∫—Ä—ã—Ç–∏–µ
npm run test:coverage

# –ü—Ä–æ—Å–º–æ—Ç—Ä HTML –æ—Ç—á–µ—Ç–∞
open coverage/index.html
```

---

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ—Å—Ç—ã —Ç—Ä–µ–±—É—é—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ –¥–ª—è –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å error handler middleware. –ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–∑–¥–∞–Ω–∞, –º–æ–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö –º–æ–¥—É–ª–µ–π.
